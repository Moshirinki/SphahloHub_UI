@page "/catalog"
@using SphahloHub_UI.Client.Service.Implementation
@using SphahloHub_UI.Client.Service.Interface
@using static SphahloHub_UI.Client.Domain.SphahloDTOs
@inject ICatalogService _catalog
@inject NavigationManager Nav

<MudGrid>
    @foreach (var sphahlo in _list)
    {
        <MudItem xs="12" sm="6" md="4">
            <MudCard Class="m-2">
                <MudCardContent>
                    <MudText Typo="Typo.h6">@sphahlo.Name</MudText>
                    <MudText>@sphahlo.Description</MudText>
                    <MudText Color="Color.Primary">@sphahlo.BasePrice.ToString("C")</MudText>
                </MudCardContent>
                <MudCardActions>
                    <MudButton Variant="Variant.Filled" Color="Color.Primary"
                               OnClick="@(() => Nav.NavigateTo($"/sphahlo/{sphahlo.Id}"))">
                        Customize
                    </MudButton>
                </MudCardActions>
            </MudCard>
        </MudItem>
    }
</MudGrid>

@code {
    private List<SphahloDto> _list = new();
    protected override async Task OnInitializedAsync()
        => _list = await _catalog.GetSphahlosAsync();
}
