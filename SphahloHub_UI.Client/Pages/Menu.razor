@page "/menu"

<PageTitle>Menu - Sphahlo Hub</PageTitle>

<MudContainer MaxWidth="MaxWidth.Large">
    <MudText Typo="Typo.h3" Align="Align.Center" Class="mb-8">Our Menu</MudText>

    @if (_loading)
    {
        <MudGrid>
            @for (int i = 0; i < 6; i++)
            {
                <MudItem xs="12" sm="6" md="4">
                    <MudCard>
                        <MudSkeleton SkeletonType="SkeletonType.Rectangle" Height="200px" />
                        <MudCardContent>
                            <MudSkeleton Width="80%" Height="28px" />
                            <MudSkeleton Width="100%" Height="20px" Class="mt-2" />
                            <MudSkeleton Width="40%" Height="24px" Class="mt-3" />
                        </MudCardContent>
                    </MudCard>
                </MudItem>
            }
        </MudGrid>
    }
    else if (!_products.Any())
    {
        <MudAlert Severity="Severity.Info" Class="my-4">
            <MudText>No menu items available at the moment. Please check back later!</MudText>
        </MudAlert>
    }
    else
    {
        <MudGrid>
            @foreach (var product in _products)
            {
                <MudItem xs="12" sm="6" md="4" lg="3">
                    <MudCard Class="product-card" Elevation="4" Style="height: 100%">
                        <MudCardMedia Image="@product.ImageUrl" Height="200" Alt="@product.Name" Class="burger-image" />
                        <MudCardContent Style="flex-grow: 1; display: flex; flex-direction: column;">
                            <MudText Typo="Typo.h6" Class="mb-2">@product.Name</MudText>
                            <MudText Typo="Typo.body2" Color="Color.Secondary" Style="flex-grow: 1;">
                                @product.Description
                            </MudText>
                            <MudText Typo="Typo.body2" Color="Color.Secondary" Style="flex-grow: 1;">
                                @product.Ingredients
                            </MudText>
                            <MudText Typo="Typo.h6" Color="Color.Primary" Class="mt-3">
                                R @product.BasePrice.ToString("F2")
                            </MudText>
                        </MudCardContent>
                        <MudCardActions>
                            <MudGrid>
                         @*        <MudItem xs="8">
                                    <MudNumericField @bind-Value="@GetQuantity(sphahlo.Id)"
                                                     Min="1" Max="999" Class="quantity-input"
                                                     Variant="Variant.Outlined" />
                                </MudItem> *@
                                <MudItem xs="4">
                                    <MudButton Variant="Variant.Filled" Color="Color.Primary" FullWidth="true"
                                               OnClick="@(() => AddToCart(product, GetQuantity(product.Id)))">
                                        <MudIcon Icon="@Icons.Material.Filled.Add" />
                                    </MudButton>
                                </MudItem>
                            </MudGrid>
                        </MudCardActions>
                    </MudCard>
                </MudItem>
            }
        </MudGrid>
    }
</MudContainer>
